window.germanized=window.germanized||{},window.germanized.admin=window.germanized.admin||{},function(t,n){n.dhl_post_label={params:{},init:function(){var e=n.dhl_post_label;e.params=wc_gzd_admin_deutsche_post_label_params,t(document).on("change","#wc-gzd-shipment-label-admin-fields-deutsche_post #product_id, #wc-gzd-shipment-label-admin-fields-deutsche_post #wc-gzd-shipment-label-wrapper-additional-services :input",e.onRefreshPreview)},getSelectedAdditionalServices:function(){return t("#wc-gzd-shipment-label-wrapper-additional-services :input:checked").map(function(){return t(this).val()}).get()},onRefreshPreview:function(){var e=n.dhl_post_label,a=germanized.admin.shipment_label_backbone.backbone,i={},d=t(".wc-gzd-shipment-create-label");i.security=e.params.refresh_label_preview_nonce,i.product_id=e.getProductId(),i.selected_services=e.getSelectedAdditionalServices(),i.action="woocommerce_gzd_dhl_refresh_deutsche_post_label_preview",a.doAjax(i,d,e.onPreviewSuccess)},onPreviewSuccess:function(e){var a=n.dhl_post_label,i=t(".wc-gzd-dhl-im-product-data .col-preview"),d=t(".wc-gzd-dhl-im-product-data").find(".image-preview");e.is_wp_int?i.parents(".wc-gzd-shipment-create-label").find(".page_format_field").hide():i.parents(".wc-gzd-shipment-create-label").find(".page_format_field").show(),e.preview_url?(i.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),d.find(".stamp-preview").length<=0&&d.append('<img class="stamp-preview" style="display: none;" />'),a.replaceProductData(e.preview_data),d.find(".stamp-preview").attr("src",e.preview_url).load(function(){i.unblock(),t(this).show()})):d.html("")},refreshProductData:function(){n.dhl_post_label.onRefreshPreview()},getProductId:function(){return t("#wc-gzd-shipment-label-admin-fields-deutsche_post #product_id").val()},replaceProductData:function(a){n.dhl_post_label;var e=t(".wc-gzd-shipment-create-label").find(".wc-gzd-dhl-im-product-data");e.find(".data-placeholder").html(""),e.find(".data-placeholder").each(function(){var e=t(this).data("replace");a.hasOwnProperty(e)?(t(this).html(a[e]),t(this).show()):t(this).hide()})}},t(document).ready(function(){germanized.admin.dhl_post_label.init()})}(jQuery,window.germanized.admin);